\documentclass[10pt]{report}
\usepackage[pdftex]{graphicx}
\usepackage{hyperref}
\hypersetup{ colorlinks=true
           , linkcolor=cyan
           , pdfnewwindow=true 
           }
\usepackage{amsmath}
\usepackage{subfig}
\usepackage{listings}
\usepackage{float}
\usepackage{textcomp}
\usepackage{multicol}
\newcommand{\HRule}{\rule{\linewidth}{0.5mm}}
\hyphenation{auto-nomous}

% Limited by competition rules to min font size 10 pt, max pages 20

\begin{document}
\title{Rutgers Autonomous Aircraft Team\\Technical Report\\2010 AUVSI UAS Competition}
\author{Patrick Hickey et. al.}
\input{./title.tex}

\begin{abstract}
We will write the abstract after the rest of the paper is finished. If we're really close to the page limit, we may be able to omit it.
\end{abstract}

\section{Introduction}

The Rutgers Autonomous Aircraft Team was formed in September 2008 with the goal of entering the 2009 AUVSI UAS competition. We didn't make it to the 2009 competition after loosing our aircraft only four weeks before. Our imaging system and autopilot system were also far from ready. 

In terms of NCAA sport eligibility, one could consider 2009 our `red shirt' year. In 2010 we are still rookies.

The team is made of 12 Rutgers undergraduates
% List, can we do itemize for this? two columns? needs to be smaller

\begin{multicols}{2}
\begin{itemize}
	\setlength{\itemsep}{0cm}
	\setlength{\parskip}{0cm}
%	\centering
	\item Anthony Garrison, President
	\item Amanda Gaetano, Vice President
	\item Pat Hickey, Treasurer and Electronics Team Leader
	\item Greg Quinn, Mechanical Team Leader
%\end{itemize}
%\begin{multicols}{2}
%\begin{itemize}
	\setlength{\itemsep}{0cm}
	\setlength{\parskip}{0cm}
%	\centering
	\item Stephen Indyk 
	\item Cogan Noll
	\item John Palmer 
	\item Adrien Perkins
	\item Michael Varga 
	\item Bradley Lord
	\item David Wescott
	\item Taras Wallace
\end{itemize}
\end{multicols}


We are advised by
 Professor Tobias Rossmann,
 and several members of the Tri-County R/C Club \cite{tricountyRC}:
 Larry Kosinar,
 Bill (last name),
 Mike Korb,
 (the man who donated daedalus), and
 Chris (test pilot) amongst many who spent time mentoring us.

We have been generously funded by 
Rutgers Engineering Governance Council,
Rutgers Alumni Association, and
WINLAB, a laboratory of the Rutgers University Department of Electrical Engineering.
% What was Chris Brocco's Uncle's Company? Something Automation?
BP Hobbies, 

We would like to acknowledge
Jeff Perkins, for his prolific networking and promotion of the team;
Gregg (last name) of BP Hobbies for getting us out of numerous binds;
Dave Devries and Michael Maia, of Invensense, for their technical guidance;
Professor Chung-chieh Shan, for overseeing Pat's independent study on the IMU design;
Ivan Seskar, for keeping us (and many other undergrads) in the black;
Roger Kondos and Brij Pathak, for contributing to the thermopile attitude sensor.

\section{Systems Engineering}

For this entry, we took a close look at our goals and requirments, and dialed back our approach to ensure we would meet the most basic competition requirments successfully.
We started the design with some broad goals based on our experience in the 2009 competition. 
Sub-teams and individuals tackled the smaller problems while still keeping an eye on the big picture. 

\subsubsection{Goals}
\begin{itemize}
	\item The air vehicle must be stable and slow, with ample payload capacity and 30 minute flight duration. It should be a proven and durable fixed-wing design.
	\item The autopilot must be based on proven software, so we could focus on improving an existing system rather than reinventing the wheel. We felt the Paparazzi system was full featured and proven, and we wanted to adapt it to our needs.
	\item The imaging system must be simple and capable. We assume the operator will be burdened with guiding the camera and identifying targets until time and resources permit us to add sensor information and control loops for guidance, and computer vision for identification.
\end{itemize}

We made design decisions of which competition goals we will attempt. 
We will be performing a manual take off, and giving the autopilot system control of the aircraft once the plane is in the air. We will also perform a manual landing. We decided not to pursue the reach goals of autonomous takeoff and landing based on our inexperience and the risk, during development and competition, to our aircraft.

One of the most difficult design decisions was to quantify ``ample payload.'' The payload size and weight is the major determining factor in the aircraft size.
% -- expand this thought pch: 
We started off assuming an electronics (computer + batteries) payload of 2.5lbs and a pan-tilt camera of 2.5lbs and 8 inch diameter.

% Originally a large and heavy system was to be used for an imaging system, but as the year progress a lighter and smaller alternative was found, which helped the mechanical team in the placement of the imaging system(I do not know the details of what they did, thatâ€™s all Pat)

Our team was divided by area of expertise into a mechanical team and an electrical team.
The mechanical team began the year with the goal of producing two competition worthy airframes. These were to become the \emph{Daedalus} and \emph{Knight Two}.

We determined, after consulting with R/C experts, that a high wing trainer is the most stable and proven fixed-wing design. Trainers traditionally have light wing loading for slow speed flight, and will be able to carry payload 

% -- donno how much use this is:
%  During both constructions we split into a wing and tail section group and a fuselage group.  While all the construction was going on, two expert builders from the local R/C club would come and advise us when we were unsure how to proceed in order to have the best balance of weight and strength.  

%Along with the actual construction of the planes, the mechanical team also focused on modifying the structures of the planes in order to fit the desired payload: the autopilot system and the imaging system.

The electronics team was in charge of the autopilot system and the imaging system. 
% not sure what i want to do to expand here pch

\section{Flight Vehicle}

At the time of this writing, we have completed and flown a single flight vehicle, which we have named the \emph{Daedalus}.
We have also nearly completed a very similar backup airframe which serve as a backup in case the \emph{Daedalus} has a disaster. The \emph{Knight Two} will be fitted with nearly identical R/C flight electronics, and accept the same autopilot and imaging system payload as the \emph{Daedalus}

\subsection{Airframe}

We elected to persue a kit-type airplane rather than our own design. 
Our own custom design, the \emph{Icarus}, suffered a catastrophic structural failure last year. From this, we learned that custom structures require much more testing and revision than a proven kit. We also reconsidered our payload requirments and decided we could easily modify a kit plane to accept our autopilot and imaging system.

\subsubsection{Daedalus}

A member of our local R/C club, Tri-County RC \cite{tricountyRC}, donated a ten-foot wingspan high wing trainer to our club. The plane, first built out of foam and balsa from long-lost plans in 1986, was accepted graciously, but required quite a bit of work before it was once again flightworthy. We removed the covering to find water damage and rot which resulted from years of storage. We stripped and rebuilt nearly the entire airframe, adding carbon-fiber reinforcements to the wing in anticipation of increased wing loading due to our payload.


Once rebuilt and covered, we tested the \emph{Daedalus} in our shop to ensure the rebuilt structure was strong enough. Of particular concern was interface between the wings and the center section---it was important to confirm that the wings were mounted and reinforced in a manner that would permit them to carry the load of the plane while in flight.  To this end, we put the \emph{Daedalus} through a series of static and dynamic ``sandbag tests.''  The plane was carefully supported under the center section, nose, and tail while pre-weighted bags of sand were slowly placed symetrically and simultaneously on the underside of each wing, starting from the innermost rib.  The \emph{Daedalus} easily supported XX lbs (XX percent of its weight) under static loading.  We then lifted the plane off its supports and jostled it to simulate in-flight motion.  The plane seemed to remain stable, and upon further observation after unloading, no cracks or defects were detected.


Satisfied, we proceeded through the usual engine and surface tests before taxiing the plane around a parking lot.  We brought the plane back inside, examined it for signs of stress and, finding everything in good condition, deemed the \emph{Daedalus} ready to fly.


Figure goes here: Photos of Daedalus in construction, sandbag testing

Someone please detail the outer dimensions. The inner dimensions, space used for flight electronics, space used for payload underneath. Landing gear height. Number of servos and their locations

Figure may go here: Line drawing of Daedalus. JOHN

\subsubsection{Knight Two}

In order to mitigate a disaster such as we had last year, we decided to build another airframe which could replace the \emph{Daedalus} at short notice. We selected an Aero-Design 12 Foot Telemaster \cite{aerodesign} because it was available as a balsa kit and similar in size to the \emph{Daedalus}.

We named it the \emph{Knight Two} after the Rutgers University mascot, the Scarlet Knight. We may rename it if someone can think of a better name. Pat needed to think up a decent name real fast in order to make this rough draft.

Since our testing plan for the \emph{Daedalus} was successful, we will follow the same plan when, in the coming weeks, we finish building \emph{Knight Two}.

Figure goes here: Photos of Knight Two in construction

Someone please detail the outer dimensions. The inner dimensions, space used for flight electronics, space used for payload underneath. Landing gear height. Number of servos and their locations

Figure may go here: Line drawing of Knight Two. JOHN

\subsection{Power}

\subsubsection{Engine}

Each airframe has a 45cc gasoline engine. Each airframe has a xx ounce gasoline tank. Based on our flight tests, with climbs to 400 feet AGL, a full xx ounce gasoline tank gives us xx minutes of flight time. (can someone guestimate this? Do we have data from break-in, etc)

\subsubsection{Batteries}

Each airframe has nearly identical flight electronics. To power a Futaba 2.4GHz receiver and 6 servos for a XX minute flight, we selected a 2 cell XX amp hour Lithium Ion battery with a 5v, 10A capacity switching regulator made by Castle Creations. Pat will add more here if he has to.

\section{Autopilot}
Our entry uses an autopilot system based off the open source 
Paparazzi project\cite{paparazziweb}. 
We ported the airborne code to Linux in order to use a single computer for all of our flight hardware and software.

\subsection{Requirments}

We needed to interface with the following hardware components:
\begin{itemize}
	\setlength{\itemsep}{0cm}
	\setlength{\parskip}{0cm}
	\item GPS
	\item servos
	\item camera
	\item etc.
\end{itemize}

Interfacing with such a large array of devices meant we had to use a ...

\subsection{Hardware}
Single board computer: beagleboard.

Description of each input, output interface.

Figure goes here: Hardware connection diagram. PAT
\subsection{Software}
PAT

Figure goes here: interprocess communication. PAT
\subsection{Ground Station}
Because we based our autopilot software on the Paparazzi project, we were able to make use of their excellent ground control software (GCS) with essentially no modifications.

Detail the capabilities of the Paparazzi GCS.

Figure goes here: Paparazzi ground station screenshot, or whatever. 
\subsection{Tuning and Testing}
PAT

\section{Imaging System}

To obtain images of targets in flight we have created an Imaging System capable of meeting all the requirements of the competition.  The system consists of a pan-tilt camera on the plane, communication software on the plane, and our ``Image Station'' application running on a dedicated laptop.  The Image Station communicates with the plane in real time via two different sets of wireless radios.  Using the Image Station, the operator can view a live video stream from the plane, control the pan-tilt camera remotely, and download and manipulate images.

\subsection{Camera}
\begin{figure}
	\centering
	\subfloat[Front View]{\label{fig:camera_frontview} 
			\includegraphics[width=0.3\textwidth]{../images/camera_frontview.jpg}}
	\subfloat[Isometric View]{\label{fig:camera_isometric} 
			\includegraphics[width=0.3\textwidth]{../images/camera_isometric.jpg}}
	\caption{Sony MHS-PM5. Image Credit: Sony}
	\label{fig:camera}
\end{figure}
MICHAEL : physical specification of camera (size, 5 megapixel stills). We selected it because...

MICHAEL: camera interfaces: serial and USB 

The camera will be mounted in a pan and tilt unit, which will ... STEVE, PAT

\subsection{Pan Tilt Unit}


\begin{figure}
	\centering
	\subfloat[Isometric View]{\label{fig:pantilt_isometric} 
			\includegraphics[width=0.9\textwidth]{../images/pantilt_isometric.png}}
\\
	\subfloat[Side View]{\label{fig:pantilt_side} 
			\includegraphics[width=0.9\textwidth]{../images/pantilt_side.png}}
	\caption{Pan Tilt Unit}
	\label{fig:pantilt}
\end{figure}
\begin{figure}
	\subfloat[Linkage Detail View]{\label{fig:pantilt_linkdetail} 
			\includegraphics[width=0.6\textwidth]{../images/pantilt_linkdetail.png}}
	\subfloat[Linkage Velocity Plots]{\label{fig:pantilt_linkdetail} 
			\includegraphics[width=0.4\textwidth]{../images/pantilt_linkplot.png}}
	\caption{Tilt Linkage Detail}
	\label{fig:pantilt_link}
\end{figure}

In order to meet the target imaging requirments, we needed to add both pan and tilt actuators to the camera. The XX by YY degree lens field of view is insufficient to see off flight path targets, and would limit our capability in the target search area phase. 
We designed a pan tilt unit which make it possible to image the entire hemisphere below the fuselage of the aircraft.

We took advantage of the MHS-PM5's swiveling lens assembley 
(see Figure \ref{fig:camera_frontview}, and added a servo actuator which could rotate the lens 135\textdegree back from straight forward, as shown in Figure \ref{}
The camera and tilt servo assembley is attached to the aircraft on a rotating mount. 


\subsection{Obtaining Images}

The entire imaging system is controlled by the ``Image Station Operator''.  They view a live video stream coming from the camera on the plane, which is transmitted over a high bandwidth radio.  The operator can also control the camera by sending commands to the plane over an Xbee Radio link.  In order to assist the operator in finding targets, a target locating algorithm will be run on the video feed to highlight possible targets.  At the time of writing work is in progress on this feature, and it is being implemented using the OpenCV library \cite{opencv} with contour detection and polygonal mapping functions.

\begin{figure} [H]
  \centering
  	\includegraphics[width=0.9\textwidth]{../images/ImageStationControls.jpg}
  	\caption[Image Station Control Panel]{The Control Panel for the Image Station.  Above is a live video feed from the plane.  Below are controls to adjust the pan/tilt of the unit, zoom in/out, take a picture, and reset the camera to a neutral position.}
  	\label{fig:imagestationcontrols}
\end{figure}

When a picture is taken on the plane it is immediately saved on the camera's memory card.  In order to view that picture on the ground it must first be transferred to the plane's main computer (beagle board), and then downloaded to the Image Station over the Xbee connection.

\subsection{Downloading Images in Real Time}

Once images are on the plane's computer they are ready to be downloaded over the Xbee Radio link.  Each image is fairly large, and our bandwidth is only around 115200 baud, so we use a bandwidth conserving method to transfer images.  The entire image is first downloaded as a low-res `thumbnail.'  Once that is available for viewing, the operator can select an area of interest and download a high-res crop of just that area.  This allows us to quickly obtain high resolution images of the targets of interest.

\begin{figure} [h]
  \centering
  	\includegraphics[width=0.9\textwidth]{../images/ImageStationMain.jpg}
  	\caption[Image Station Interface]{The main interface for the Image Station.  All the images that have been taken are displayed on the top left.  The queue of images to download is on the bottom left.  On the right is the currently displayed image, with target information underneath.}
  	\label{fig:imagestationinterface}
\end{figure}

\subsection{Identifying target characteristics}

When an image has been fully downloaded to the ground targets can be identified and tagged with metadata.  Information about the plane's orientation, gps coordinates, altitude, yaw/pitch/roll, and pan/tilt of the camera are sent down with the image.  Using this information the GPS location of the target can be determined using the intrinsic properties of the camera and some basic trigonometry. Target shape, color, alphanumeric, alphanumeric color, and orientation are all entered manually by the operator.

\section{Operation Safety}

We consider the safety of our team, our aircraft, and our spectators to be of utmost importance.  As such, we've implemented numerous safety features and developed a strict procedure for starting, taxiing, and flying the plane.  This procedure enables us to ensure that all personnel are safely in place, and that no intergral checks are missed.

\subsection{Safety Features}
Our system is designed to gracefully handle any failure while continuing to ensure the safety of those nearby. 
\begin{itemize}
	\setlength{\itemsep}{0cm}
	\setlength{\parskip}{0cm}
	\item Channel 5 (?) allows quick switch to safety pilot in case of autopilot malfunction.
	\item If the plane loses contact with the ground station for more than XX seconds, the autopilot will default to a ``return home mode'' that will direct the plane towards the groundstation in hopes of reestablishing a connection.  If the connection remains dead for XX minutes, the autopilot will direct the plane to [DO SOMETHING?]
	\item Channel 6 (?) functions as a remote kill switch, ensuring the ability to cut power to the engine if an emergent situation precludes direct manual shut off.
	\item etc?
\end{itemize}

\subsection{Procedures}
Our team employs a clearly defined flight routine every time the engine is started.  This routine ensures that everyone in the starting area is fully alert and aware at all times, that no one stands in a position of known danger (i.e. the prop arc), and that all know when the starter makes contact with the spinner.  A set script with clear key words not only ensures the safety of our team, but also is conducive to efficiency, consistency, and repeatability.


\bibliographystyle{plain}
\bibliography{paper}

\end{document}
